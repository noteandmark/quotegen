<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <title>Request Quote</title>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
        <a class="navbar-brand" href="/">На главную</a>
    </div>
</nav>

<div class="container mt-1">
    <h6>Запрос цитаты</h6>

    <div class="card mb-2">
        <div class="card-body">
            <h6 class="card-title">Редактирование цитаты:</h6>

            <!-- Форма для редактирования цитаты -->
            <form th:action="@{/admin/acceptquote}" method="post" class="mb-2">
                <!-- Используйте textarea для многострочного ввода цитаты -->
                <textarea class="form-control mb-2" name="quoteContent" th:text="${quote.content}" maxlength="4096" style="height: auto; min-height: 400px;"></textarea>
                <!-- Ввод для названия книги -->
                <input type="text" class="form-control mb-2" name="bookTitle" placeholder="Название книги" th:value="${quote.bookTitle}">

                <!-- Ввод для автора книги -->
                <input type="text" class="form-control mb-2" name="bookAuthor" placeholder="Автор книги" th:value="${quote.bookAuthor}">

                <!-- Передача идентификатора цитаты -->
                <input type="hidden" name="quoteId" th:value="${quote.id}">

                <label for="randomDate">Случайный выбор:</label>
                <input type="radio" id="randomDate" name="publishOption" value="random" checked onchange="toggleDatePicker()">
                <br>

                <label for="publishDate">Опубликовать с выбором даты:</label>
                <input type="radio" id="publishDate" name="publishOption" value="chosen" onchange="toggleDatePicker()">
                <br>

                <div id="datePickerContainer" style="display: none;">
                    <label for="datepicker">Дата публикации:</label>
                    <input type="datetime-local" id="datepicker" name="publishDate"
                    min="${#dates.format(#temporals.min(#temporals.createNow(), #temporals.createNow().plusDays(1)), 'yyyy-MM-ddTHH:mm')}">
                </div>

                <!-- Кнопка "Принять" для отправки формы -->
                <button type="submit" class="btn btn-success">Принять</button>
            </form>

            <script>
                function toggleDatePicker() {
                    var datePickerContainer = document.getElementById("datePickerContainer");
                    var publishDateInput = document.getElementById("datepicker");

                    if (document.getElementById("publishDate").checked) {
                        datePickerContainer.style.display = "block";
                        publishDateInput.required = true;
                    } else {
                        datePickerContainer.style.display = "none";
                        publishDateInput.required = false;
                    }
                }
            </script>

            <form th:action="@{/admin/rejectquote}" method="post">
                <input type="hidden" name="quoteId" th:value="${quote.id}">
                <button type="submit" class="btn btn-danger">Отклонить</button>
            </form>
        </div>

</body>
</html>